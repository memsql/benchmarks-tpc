CREATE DATABASE tpcds;
USE tpcds;

CREATE TABLE store_sales (
    ss_sold_date_sk bigint(11),
    ss_sold_time_sk bigint(11),
    ss_item_sk bigint(11),
    ss_customer_sk bigint(11),
    ss_cdemo_sk bigint(11),
    ss_hdemo_sk bigint(11),
    ss_addr_sk bigint(11),
    ss_store_sk bigint(11),
    ss_promo_sk bigint(11),
    ss_ticket_number bigint(11),
    ss_quantity bigint(11),
    ss_wholesale_cost decimal(7,2),
    ss_list_price decimal(7,2),
    ss_sales_price decimal(7,2),
    ss_ext_discount_amt decimal(7,2),
    ss_ext_sales_price decimal(7,2),
    ss_ext_wholesale_cost decimal(7,2),
    ss_ext_list_price decimal(7,2),
    ss_ext_tax decimal(7,2),
    ss_coupon_amt decimal(7,2),
    ss_net_paid decimal(7,2),
    ss_net_paid_inc_tax decimal(7,2),
    ss_net_profit decimal(7,2),
    UNIQUE KEY pk (ss_item_sk, ss_ticket_number) USING HASH,
    KEY (ss_item_sk, ss_ticket_number) using clustered columnstore,
    shard key(ss_item_sk)
);

CREATE TABLE store_returns (
    sr_returned_date_sk bigint(11),
    sr_return_time_sk bigint(11),
    sr_item_sk bigint(11),
    sr_customer_sk bigint(11),
    sr_cdemo_sk bigint(11),
    sr_hdemo_sk bigint(11),
    sr_addr_sk bigint(11),
    sr_store_sk bigint(11),
    sr_reason_sk bigint(11),
    sr_ticket_number bigint(11),
    sr_return_quantity bigint(11),
    sr_return_amt decimal(7,2),
    sr_return_tax decimal(7,2),
    sr_return_amt_inc_tax decimal(7,2),
    sr_fee decimal(7,2),
    sr_return_ship_cost decimal(7,2),
    sr_refunded_cash decimal(7,2),
    sr_reversed_charge decimal(7,2),
    sr_store_credit decimal(7,2),
    sr_net_loss decimal(7,2),
    UNIQUE KEY pk (sr_item_sk, sr_ticket_number) USING HASH,
    KEY (sr_item_sk, sr_ticket_number) using clustered columnstore,
    shard key(sr_item_sk)
);

CREATE TABLE catalog_sales (
    cs_sold_date_sk bigint(11),
    cs_sold_time_sk bigint(11),
    cs_ship_date_sk bigint(11),
    cs_bill_customer_sk bigint(11),
    cs_bill_cdemo_sk bigint(11),
    cs_bill_hdemo_sk bigint(11),
    cs_bill_addr_sk bigint(11),
    cs_ship_customer_sk bigint(11),
    cs_ship_cdemo_sk bigint(11),
    cs_ship_hdemo_sk bigint(11),
    cs_ship_addr_sk bigint(11),
    cs_call_center_sk bigint(11),
    cs_catalog_page_sk bigint(11),
    cs_ship_mode_sk bigint(11),
    cs_warehouse_sk bigint(11),
    cs_item_sk bigint(11),
    cs_promo_sk bigint(11),
    cs_order_number bigint(11),
    cs_quantity bigint(11),
    cs_wholesale_cost decimal(7,2),
    cs_list_price decimal(7,2),
    cs_sales_price decimal(7,2),
    cs_ext_discount_amt decimal(7,2),
    cs_ext_sales_price decimal(7,2),
    cs_ext_wholesale_cost decimal(7,2),
    cs_ext_list_price decimal(7,2),
    cs_ext_tax decimal(7,2),
    cs_coupon_amt decimal(7,2),
    cs_ext_ship_cost decimal(7,2),
    cs_net_paid decimal(7,2),
    cs_net_paid_inc_tax decimal(7,2),
    cs_net_paid_inc_ship decimal(7,2),
    cs_net_paid_inc_ship_tax decimal(7,2),
    cs_net_profit decimal(7,2),
    UNIQUE KEY pk (cs_item_sk, cs_order_number) USING HASH,
    KEY (cs_item_sk, cs_order_number) using clustered columnstore,
    shard key(cs_item_sk)
);

CREATE TABLE catalog_returns (
    cr_returned_date_sk bigint(11),
    cr_returned_time_sk bigint(11),
    cr_item_sk bigint(11),
    cr_refunded_customer_sk bigint(11),
    cr_refunded_cdemo_sk bigint(11),
    cr_refunded_hdemo_sk bigint(11),
    cr_refunded_addr_sk bigint(11),
    cr_returning_customer_sk bigint(11),
    cr_returning_cdemo_sk bigint(11),
    cr_returning_hdemo_sk bigint(11),
    cr_returning_addr_sk bigint(11),
    cr_call_center_sk bigint(11),
    cr_catalog_page_sk bigint(11),
    cr_ship_mode_sk bigint(11),
    cr_warehouse_sk bigint(11),
    cr_reason_sk bigint(11),
    cr_order_number bigint(11),
    cr_return_quantity bigint(11),
    cr_return_amount decimal(7,2),
    cr_return_tax decimal(7,2),
    cr_return_amt_inc_tax decimal(7,2),
    cr_fee decimal(7,2),
    cr_return_ship_cost decimal(7,2),
    cr_refunded_cash decimal(7,2),
    cr_reversed_charge decimal(7,2),
    cr_store_credit decimal(7,2),
    cr_net_loss decimal(7,2),
    UNIQUE KEY pk (cr_item_sk, cr_order_number) USING HASH,
    KEY (cr_item_sk, cr_order_number) using clustered columnstore,
    shard key(cr_item_sk)
);

CREATE TABLE web_sales (
    ws_sold_date_sk bigint(11),
    ws_sold_time_sk bigint(11),
    ws_ship_date_sk bigint(11),
    ws_item_sk bigint(11),
    ws_bill_customer_sk bigint(11),
    ws_bill_cdemo_sk bigint(11),
    ws_bill_hdemo_sk bigint(11),
    ws_bill_addr_sk bigint(11),
    ws_ship_customer_sk bigint(11),
    ws_ship_cdemo_sk bigint(11),
    ws_ship_hdemo_sk bigint(11),
    ws_ship_addr_sk bigint(11),
    ws_web_page_sk bigint(11),
    ws_web_site_sk bigint(11),
    ws_ship_mode_sk bigint(11),
    ws_warehouse_sk bigint(11),
    ws_promo_sk bigint(11),
    ws_order_number bigint(11),
    ws_quantity bigint(11),
    ws_wholesale_cost decimal(7,2),
    ws_list_price decimal(7,2),
    ws_sales_price decimal(7,2),
    ws_ext_discount_amt decimal(7,2),
    ws_ext_sales_price decimal(7,2),
    ws_ext_wholesale_cost decimal(7,2),
    ws_ext_list_price decimal(7,2),
    ws_ext_tax decimal(7,2),
    ws_coupon_amt decimal(7,2),
    ws_ext_ship_cost decimal(7,2),
    ws_net_paid decimal(7,2),
    ws_net_paid_inc_tax decimal(7,2),
    ws_net_paid_inc_ship decimal(7,2),
    ws_net_paid_inc_ship_tax decimal(7,2),
    ws_net_profit decimal(7,2),
    UNIQUE KEY pk (ws_item_sk, ws_order_number) USING HASH,
    KEY (ws_item_sk, ws_order_number) using clustered columnstore,
    shard key(ws_item_sk)
);

CREATE TABLE web_returns (
    wr_returned_date_sk bigint(11),
    wr_returned_time_sk bigint(11),
    wr_item_sk bigint(11),
    wr_refunded_customer_sk bigint(11),
    wr_refunded_cdemo_sk bigint(11),
    wr_refunded_hdemo_sk bigint(11),
    wr_refunded_addr_sk bigint(11),
    wr_returning_customer_sk bigint(11),
    wr_returning_cdemo_sk bigint(11),
    wr_returning_hdemo_sk bigint(11),
    wr_returning_addr_sk bigint(11),
    wr_web_page_sk bigint(11),
    wr_reason_sk bigint(11),
    wr_order_number bigint(11),
    wr_return_quantity bigint(11),
    wr_return_amt decimal(7,2),
    wr_return_tax decimal(7,2),
    wr_return_amt_inc_tax decimal(7,2),
    wr_fee decimal(7,2),
    wr_return_ship_cost decimal(7,2),
    wr_refunded_cash decimal(7,2),
    wr_reversed_charge decimal(7,2),
    wr_account_credit decimal(7,2),
    wr_net_loss decimal(7,2),
    UNIQUE KEY pk (wr_item_sk, wr_order_number) USING HASH,
    KEY (wr_item_sk, wr_order_number) using clustered columnstore,
    shard key(wr_item_sk)
);

CREATE TABLE inventory (
    inv_date_sk bigint(11),
    inv_item_sk bigint(11),
    inv_warehouse_sk bigint(11),
    inv_quantity_on_hand bigint(11),
    UNIQUE KEY pk (inv_date_sk, inv_item_sk, inv_warehouse_sk) USING HASH,
    KEY (inv_item_sk,inv_date_sk,  inv_warehouse_sk) using clustered columnstore,
    shard key(inv_item_sk)
);

CREATE TABLE store (
    s_store_sk bigint(11),
    s_store_id varchar(16) NOT NULL,
    s_rec_start_date date,
    s_rec_end_date date,
    s_closed_date_sk bigint(11),
    s_store_name varchar(50),
    s_number_employees bigint(11),
    s_floor_space bigint(11),
    s_hours varchar(20),
    S_manager varchar(40),
    S_market_id bigint(11),
    S_geography_class varchar(100),
    S_market_desc varchar(100),
    s_market_manager varchar(40),
    s_division_id bigint(11),
    s_division_name varchar(50),
    s_company_id bigint(11),
    s_company_name varchar(50),
    s_street_number varchar(10),
    s_street_name varchar(60),
    s_street_type varchar(15),
    s_suite_number varchar(10),
    s_city varchar(60),
    s_county varchar(30),
    s_state char(2),
    s_zip varchar(10),
    s_country varchar(20),
    s_gmt_offset decimal(5,2),
    s_tax_percentage decimal(5,2),
    UNIQUE KEY pk (s_store_sk) USING HASH,
    shard KEY (s_store_sk) using clustered columnstore
);

CREATE TABLE call_center (
    cc_call_center_sk bigint(11),
    cc_call_center_id varchar(16) NOT NULL,
    cc_rec_start_date date,
    cc_rec_end_date date,
    cc_closed_date_sk bigint(11),
    cc_open_date_sk bigint(11),
    cc_name varchar(50),
    cc_class varchar(50),
    cc_employees bigint(11),
    cc_sq_ft bigint(11),
    cc_hours varchar(20),
    cc_manager varchar(40),
    cc_mkt_id bigint(11),
    cc_mkt_class varchar(50),
    cc_mkt_desc varchar(100),
    cc_market_manager varchar(40),
    cc_division bigint(11),
    cc_division_name varchar(50),
    cc_company bigint(11),
    cc_company_name varchar(50),
    cc_street_number varchar(10),
    cc_street_name varchar(60),
    cc_street_type varchar(15),
    cc_suite_number varchar(10),
    cc_city varchar(60),
    cc_county varchar(30),
    cc_state char(2),
    cc_zip varchar(10),
    cc_country varchar(20),
    cc_gmt_offset decimal(5,2),
    cc_tax_percentage decimal(5,2),
    UNIQUE KEY pk (cc_call_center_sk) USING HASH,
    shard KEY (cc_call_center_sk) using clustered columnstore
);

CREATE TABLE catalog_page (
    cp_catalog_page_sk bigint(11),
    cp_catalog_page_id varchar(16) NOT NULL,
    cp_start_date_sk bigint(11),
    cp_end_date_sk bigint(11),
    cp_department varchar(50),
    cp_catalog_number bigint(11),
    cp_catalog_page_number bigint(11),
    cp_description varchar(100),
    cp_type varchar(100),
    UNIQUE KEY pk (cp_catalog_page_sk) USING HASH,
    shard KEY (cp_catalog_page_sk) using clustered columnstore
);

CREATE TABLE web_site (
    web_site_sk bigint(11),
    web_site_id varchar(16),
    web_rec_start_date date,
    web_rec_end_date date,
    web_name varchar(50),
    web_open_date_sk bigint(11),
    web_close_date_sk bigint(11),
    web_class varchar(50),
    web_manager varchar(40),
    web_mkt_id bigint(11),
    web_mkt_class varchar(50),
    web_mkt_desc varchar(100),
    web_market_manager varchar(40),
    web_company_id bigint(11),
    web_company_name varchar(50),
    web_street_number varchar(10),
    web_street_name varchar(60),
    web_street_type varchar(15),
    web_suite_number varchar(10),
    web_city varchar(60),
    web_county varchar(30),
    web_state char(2),
    web_zip varchar(10),
    web_country varchar(20),
    web_gmt_offset decimal(5,2),
    web_tax_percentage decimal(5,2),
    UNIQUE KEY pk (web_site_sk) USING HASH,
    shard KEY (web_site_sk) using clustered columnstore
);

CREATE TABLE web_page (
    wp_web_page_sk bigint(11),
    wp_web_page_id varchar(16) NOT NULL,
    wp_rec_start_date date,
    wp_rec_end_date date,
    wp_creation_date_sk bigint(11),
    wp_access_date_sk bigint(11),
    wp_autogen_flag char(1),
    wp_customer_sk bigint(11),
    wp_url varchar(100),
    wp_type varchar(50),
    wp_char_count bigint(11),
    wp_link_count bigint(11),
    wp_image_count bigint(11),
    wp_max_ad_count bigint(11),
    UNIQUE KEY pk (wp_web_page_sk) USING HASH,
    shard KEY (wp_web_page_sk) using clustered columnstore
);

CREATE TABLE warehouse (
    w_warehouse_sk bigint(11),
    w_warehouse_id varchar(16) NOT NULL,
    w_warehouse_name varchar(20),
    w_warehouse_sq_ft bigint(11),
    w_street_number varchar(10),
    w_street_name varchar(60),
    w_street_type varchar(15),
    w_suite_number varchar(10),
    w_city varchar(60),
    w_county varchar(30),
    w_state char(2),
    w_zip varchar(10),
    w_country varchar(20),
    w_gmt_offset decimal(5,2),
    UNIQUE KEY pk (w_warehouse_sk) USING HASH,
    shard KEY (w_warehouse_sk) using clustered columnstore
);

CREATE TABLE customer (
    c_customer_sk bigint(11),
    c_customer_id varchar(16) NOT NULL,
    c_current_cdemo_sk bigint(11),
    c_current_hdemo_sk bigint(11),
    c_current_addr_sk bigint(11),
    c_first_shipto_date_sk bigint(11),
    c_first_sales_date_sk bigint(11),
    c_salutation varchar(10),
    c_first_name varchar(20),
    c_last_name varchar(30),
    c_preferred_cust_flag char(1),
    c_birth_day bigint(11),
    c_birth_month bigint(11),
    c_birth_year bigint(11),
    c_birth_country varchar(20),
    c_login varchar(13),
    c_email_address varchar(50),
    c_last_review_date_sk bigint(11),
    UNIQUE KEY pk (c_customer_sk) USING HASH,
    shard KEY (c_customer_sk) using clustered columnstore
);

CREATE TABLE customer_address (
    ca_address_sk bigint(11),
    ca_address_id varchar(16) NOT NULL,
    ca_street_number varchar(10),
    ca_street_name varchar(60),
    ca_street_type varchar(15),
    ca_suite_number varchar(10),
    ca_city varchar(60),
    ca_county varchar(30),
    ca_state char(2),
    ca_zip varchar(10),
    ca_country varchar(20),
    ca_gmt_offset decimal(5,2),
    ca_location_type varchar(20),
    UNIQUE KEY pk (ca_address_sk) USING HASH,
    shard KEY (ca_address_sk) using clustered columnstore
);

CREATE TABLE customer_demographics (
    cd_demo_sk bigint(11),
    cd_gender char(1),
    cd_marital_status char(1),
    cd_education_status varchar(20),
    cd_purchase_estimate bigint(11),
    cd_credit_rating varchar(10),
    cd_dep_count bigint(11),
    cd_dep_employed_count bigint(11),
    cd_dep_college_count bigint(11),
    UNIQUE KEY pk (cd_demo_sk) USING HASH,
    shard KEY (cd_demo_sk) using clustered columnstore
);

CREATE TABLE date_dim (
    d_date_sk bigint(11),
    d_date_id varchar(16) NOT NULL,
    d_date date,
    d_month_seq bigint(11),
    d_week_seq bigint(11),
    d_quarter_seq bigint(11),
    d_year bigint(11),
    d_dow bigint(11),
    d_moy bigint(11),
    d_dom bigint(11),
    d_qoy bigint(11),
    d_fy_year bigint(11),
    d_fy_quarter_seq bigint(11),
    d_fy_week_seq bigint(11),
    d_day_name varchar(9),
    d_quarter_name varchar(6),
    d_holiday char(1),
    d_weekend char(1),
    d_following_holiday char(1),
    d_first_dom bigint(11),
    d_last_dom bigint(11),
    d_same_day_ly bigint(11),
    d_same_day_lq bigint(11),
    d_current_day char(1),
    d_current_week char(1),
    d_current_month char(1),
    d_current_quarter char(1),
    d_current_year char(1),
    UNIQUE KEY pk (d_date_sk) USING HASH,
    shard KEY (d_date_sk) using clustered columnstore
);

CREATE TABLE household_demographics (
    hd_demo_sk bigint(11),
    hd_income_band_sk bigint(11),
    hd_buy_potential varchar(15),
    hd_dep_count bigint(11),
    hd_vehicle_count bigint(11),
    UNIQUE KEY pk (hd_demo_sk) USING HASH,
    shard KEY (hd_demo_sk) using clustered columnstore
);

CREATE TABLE item (
    i_item_sk bigint(11),
    i_item_id varchar(16) NOT NULL,
    i_rec_start_date date,
    i_rec_end_date date,
    i_item_desc varchar(200),
    i_current_price decimal(7,2),
    i_wholesale_cost decimal(7,2),
    i_brand_id bigint(11),
    i_brand varchar(50),
    i_class_id bigint(11),
    i_class varchar(50),
    i_category_id bigint(11),
    i_category varchar(50),
    i_manufact_id bigint(11),
    i_manufact varchar(50),
    i_size varchar(20),
    i_formulation varchar(20),
    i_color varchar(20),
    i_units varchar(10),
    i_container varchar(10),
    i_manager_id bigint(11),
    i_product_name varchar(50),
    UNIQUE KEY pk (i_item_sk) USING HASH,
    shard KEY (i_item_sk) using clustered columnstore
);

CREATE TABLE income_band (
    ib_income_band_sk bigint(11),
    ib_lower_bound bigint(11),
    ib_upper_bound bigint(11),
    UNIQUE KEY pk (ib_income_band_sk) USING HASH,
    shard KEY (ib_income_band_sk) using clustered columnstore
);

CREATE TABLE promotion (
    p_promo_sk bigint(11),
    p_promo_id varchar(16) NOT NULL,
    p_start_date_sk bigint(11),
    p_end_date_sk bigint(11),
    p_item_sk bigint(11),
    p_cost decimal(15,2),
    p_response_target bigint(11),
    p_promo_name varchar(50),
    p_channel_dmail char(1),
    p_channel_email char(1),
    p_channel_catalog char(1),
    p_channel_tv char(1),
    p_channel_radio char(1),
    p_channel_press char(1),
    p_channel_event char(1),
    p_channel_demo char(1),
    p_channel_details varchar(100),
    p_purpose varchar(15),
    p_discount_active char(1),
    UNIQUE KEY pk (p_promo_sk) USING HASH,
    shard KEY (p_promo_sk) using clustered columnstore
);

CREATE TABLE reason (
    r_reason_sk bigint(11),
    r_reason_id varchar(16) NOT NULL,
    r_reason_desc varchar(100),
    UNIQUE KEY pk (r_reason_sk) USING HASH,
    shard KEY (r_reason_sk) using clustered columnstore
);

CREATE TABLE ship_mode (
    sm_ship_mode_sk bigint(11),
    sm_ship_mode_id varchar(16) NOT NULL,
    sm_type varchar(30),
    sm_code varchar(10),
    sm_carrier varchar(20),
    sm_contract varchar(20),
    UNIQUE KEY pk (sm_ship_mode_sk) USING HASH,
    shard KEY (sm_ship_mode_sk) using clustered columnstore
);

CREATE TABLE time_dim (
    t_time_sk bigint(11),
    t_time_id varchar(16) NOT NULL,
    t_time bigint(11),
    t_hour bigint(11),
    t_minute bigint(11),
    t_second bigint(11),
    t_am_pm char(2),
    t_shift varchar(20),
    t_sub_shift varchar(20),
    t_meal_time varchar(20),
    UNIQUE KEY pk (t_time_sk) USING HASH,
    shard KEY (t_time_sk) using clustered columnstore
);
